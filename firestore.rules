/**
 * @fileoverview Firestore Security Rules for Prototyping.
 *
 * Core Philosophy:
 * This ruleset adopts a public-access model, suitable for prototyping, local testing, or public dashboards.
 * It assumes that all data is accessible to all users, including unauthenticated users.
 * While it disables authentication checks, it still enforces basic structural segregation and prepares the ground for future, more restrictive rules.
 *
 * Data Structure:
 * - /sensor_configurations/{sensorConfigurationId}/sensor_data/{sensorDataId}: Stores individual sensor data points linked to a configuration.
 * - /sensor_configurations/{sensorConfigurationId}: Stores global sensor configurations.
 * - /analysis_results/{analysisResultId}: Stores leak analysis results.
 * - /test_sessions/{testSessionId}: Stores test session data.
 *
 * Key Security Decisions:
 * - No authentication required: All reads and writes are allowed for all users, including unauthenticated users.
 * - No user listing: There are no user-specific collections, so user listing is not applicable.
 * - Public Read, Public Write: All collections are configured for public read and public write.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read or write sensor data points.
     * @path /sensor_configurations/{sensorConfigurationId}/sensor_data/{sensorDataId}
     * @allow (get, list) Any user can read a sensor data point.
     * @allow (create, update, delete) Any user can create, update, or delete a sensor data point.
     * @deny None: This rule allows all access.
     * @principle Public read, public write.
     */
    match /sensor_configurations/{sensorConfigurationId}/sensor_data/{sensorDataId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read or write sensor configurations.
     * @path /sensor_configurations/{sensorConfigurationId}
     * @allow (get, list) Any user can read a sensor configuration.
     * @allow (create, update, delete) Any user can create, update, or delete a sensor configuration.
     * @deny None: This rule allows all access.
     * @principle Public read, public write.
     */
    match /sensor_configurations/{sensorConfigurationId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read or write analysis results.
     * @path /analysis_results/{analysisResultId}
     * @allow (get, list) Any user can read an analysis result.
     * @allow (create, update, delete) Any user can create, update, or delete an analysis result.
     * @deny None: This rule allows all access.
     * @principle Public read, public write.
     */
    match /analysis_results/{analysisResultId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read or write test session data.
     * @path /test_sessions/{testSessionId}
     * @allow (get, list) Any user can read a test session.
     * @allow (create, update, delete) Any user can create, update, or delete a test session.
     * @deny None: This rule allows all access.
     * @principle Public read, public write.
     */
    match /test_sessions/{testSessionId} {
          allow get, list: if true;
          allow create, update, delete: if true;
    }
  }
}